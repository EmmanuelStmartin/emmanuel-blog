<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {{if hasmath}} {{insert head_katex.html}} {{end}}
  {{if hascode}} {{insert head_highlight.html}} {{end}}
  {{insert style.html}}
  {{isdef title}} <title>{{fill title}}</title>  {{end}}
  {{isdef description}} <meta name="description" content="{{fill description}}" /> {{end}}
  {{isdef rss_title}} <link rel="alternate" type="application/rss+xml" title="{{fill rss_title}}" href="{{fill rss_path}}index.xml" /> {{end}}
	{{isdef rss_description}} <link rel="alternate" type="application/rss+xml" title="{{fill rss_description}}" href="{{fill rss_path}}index.xml" /> {{end}}
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
	<link rel="manifest" href="/assets/site.webmanifest">

  <script>
    const K = 'franklin-theme'
    const H = document.documentElement // Target <html> tag

    // Function to apply theme
    const applyTheme = (theme) => {
      H.setAttribute('data-theme', theme); // Use data-theme attribute
      // Optional: Update button text/icon if you have one
      const themeToggleButton = document.getElementById('theme-toggle');
      if (themeToggleButton) {
        themeToggleButton.textContent = theme === 'dark' ? '☀️' : '🌙';
      }
    };

    // Function to toggle theme
    const toggleTheme = () => {
      const currentTheme = H.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      localStorage.setItem(K, newTheme);
      applyTheme(newTheme);
    };

    // Apply initial theme on load
    let initTheme = localStorage.getItem(K);
    if (!initTheme) {
      // Check system preference if no setting is stored
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      initTheme = prefersDark ? 'dark' : 'light';
    }
    applyTheme(initTheme);

    // Add event listener after DOM is loaded
    // It's better to put this part in foot.html or wrap in DOMContentLoaded
    // But keeping structure similar for now. Button listener added in header.html
  </script>
  </head>
<body>
  {{insert header.html}}
  